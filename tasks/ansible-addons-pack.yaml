---
# ============================================================
#                     ansible-addons-pack.yaml
# ============================================================

- name: "Block: ansible-addons-pack.yaml"
  become: true

  block:

    - name: "Install passlib for use with Ansible Vault encryption (Python crpyt module is being deprecated)"
      ansible.builtin.apt:
        name: python3-passlib
        state: latest
        update_cache: true

    - name: "Install conda"
      ansible.builtin.include_role:
        name: "aaronvonawesome.conda"

  rescue:

    - name: "ERROR: ansible-addons-pack.yaml"
      ansible.builtin.debug:
        msg: "ERROR: ansible-addons-pack.yaml"

    - name: "Error detected! Stopping Playbook :-("
      ansible.builtin.fail:
        msg: "Error detected! Stopping Playbook :-("
